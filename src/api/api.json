{
    "swagger": "2.0",
    "info": {
        "title": "小红书数据提取 API",
        "description": "基于 Fastify 和 TypeScript 构建的小红书数据提取服务，支持智能解析分享文本",
        "version": "2.0.0"
    },
    "definitions": {
        "ApiResponse": {
            "type": "object",
            "properties": {
                "success": {
                    "type": "boolean",
                    "description": "请求是否成功"
                },
                "data": {
                    "description": "响应数据"
                },
                "message": {
                    "type": "string",
                    "description": "响应消息"
                },
                "error": {
                    "type": "string",
                    "description": "错误信息"
                },
                "timestamp": {
                    "type": "string",
                    "format": "date-time",
                    "description": "时间戳"
                }
            },
            "required": [
                "success",
                "timestamp"
            ]
        },
        "User": {
            "type": "object",
            "properties": {
                "id": {
                    "type": "integer",
                    "description": "用户ID"
                },
                "name": {
                    "type": "string",
                    "description": "用户姓名"
                },
                "email": {
                    "type": "string",
                    "format": "email",
                    "description": "用户邮箱"
                },
                "createdAt": {
                    "type": "string",
                    "format": "date-time",
                    "description": "创建时间"
                }
            }
        },
        "Post": {
            "type": "object",
            "properties": {
                "id": {
                    "type": "integer",
                    "description": "文章ID"
                },
                "userId": {
                    "type": "integer",
                    "description": "作者ID"
                },
                "title": {
                    "type": "string",
                    "description": "文章标题"
                },
                "body": {
                    "type": "string",
                    "description": "文章内容"
                }
            }
        }
    },
    "paths": {
        "/": {
            "get": {
                "responses": {
                    "200": {
                        "description": "Default Response"
                    }
                }
            }
        },
        "/health": {
            "get": {
                "responses": {
                    "200": {
                        "description": "Default Response"
                    }
                }
            }
        },
        "/api/info": {
            "get": {
                "responses": {
                    "200": {
                        "description": "Default Response"
                    }
                }
            }
        },
        "/api/users": {
            "get": {
                "summary": "获取用户列表",
                "description": "获取系统中所有用户的列表，支持分页、搜索和筛选",
                "tags": [
                    "用户管理"
                ],
                "parameters": [
                    {
                        "type": "integer",
                        "minimum": 1,
                        "default": 1,
                        "required": false,
                        "in": "query",
                        "name": "page"
                    },
                    {
                        "type": "integer",
                        "minimum": 1,
                        "maximum": 100,
                        "default": 10,
                        "required": false,
                        "in": "query",
                        "name": "limit"
                    },
                    {
                        "type": "string",
                        "description": "搜索用户名或邮箱",
                        "required": false,
                        "in": "query",
                        "name": "search"
                    },
                    {
                        "type": "boolean",
                        "description": "筛选活跃用户",
                        "required": false,
                        "in": "query",
                        "name": "isActive"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "成功获取用户列表",
                        "schema": {
                            "description": "成功获取用户列表",
                            "type": "object",
                            "properties": {
                                "success": {
                                    "type": "boolean"
                                },
                                "data": {
                                    "type": "object",
                                    "properties": {
                                        "users": {
                                            "type": "array",
                                            "items": {
                                                "type": "object",
                                                "properties": {
                                                    "_id": {
                                                        "type": "string"
                                                    },
                                                    "name": {
                                                        "type": "string"
                                                    },
                                                    "email": {
                                                        "type": "string",
                                                        "format": "email"
                                                    },
                                                    "avatar": {
                                                        "type": "string"
                                                    },
                                                    "isActive": {
                                                        "type": "boolean"
                                                    },
                                                    "profile": {
                                                        "type": "object"
                                                    },
                                                    "preferences": {
                                                        "type": "object"
                                                    },
                                                    "createdAt": {
                                                        "type": "string",
                                                        "format": "date-time"
                                                    },
                                                    "updatedAt": {
                                                        "type": "string",
                                                        "format": "date-time"
                                                    }
                                                }
                                            }
                                        },
                                        "pagination": {
                                            "type": "object",
                                            "properties": {
                                                "total": {
                                                    "type": "integer"
                                                },
                                                "page": {
                                                    "type": "integer"
                                                },
                                                "limit": {
                                                    "type": "integer"
                                                },
                                                "totalPages": {
                                                    "type": "integer"
                                                }
                                            }
                                        }
                                    }
                                },
                                "message": {
                                    "type": "string"
                                },
                                "timestamp": {
                                    "type": "string",
                                    "format": "date-time"
                                }
                            }
                        }
                    },
                    "503": {
                        "description": "数据库未连接",
                        "schema": {
                            "description": "数据库未连接",
                            "type": "object",
                            "properties": {
                                "success": {
                                    "type": "boolean"
                                },
                                "error": {
                                    "type": "string"
                                },
                                "timestamp": {
                                    "type": "string",
                                    "format": "date-time"
                                }
                            }
                        }
                    }
                }
            },
            "post": {
                "summary": "创建新用户",
                "description": "创建一个新的用户",
                "tags": [
                    "用户管理"
                ],
                "parameters": [
                    {
                        "name": "body",
                        "in": "body",
                        "schema": {
                            "type": "object",
                            "properties": {
                                "name": {
                                    "type": "string",
                                    "description": "用户姓名"
                                },
                                "email": {
                                    "type": "string",
                                    "format": "email",
                                    "description": "用户邮箱"
                                },
                                "avatar": {
                                    "type": "string",
                                    "description": "用户头像URL"
                                },
                                "profile": {
                                    "type": "object",
                                    "properties": {
                                        "bio": {
                                            "type": "string",
                                            "description": "个人简介"
                                        },
                                        "location": {
                                            "type": "string",
                                            "description": "所在地"
                                        },
                                        "website": {
                                            "type": "string",
                                            "description": "个人网站"
                                        }
                                    }
                                }
                            },
                            "required": [
                                "name",
                                "email"
                            ]
                        }
                    }
                ],
                "responses": {
                    "201": {
                        "description": "成功创建用户",
                        "schema": {
                            "description": "成功创建用户",
                            "type": "object",
                            "properties": {
                                "success": {
                                    "type": "boolean"
                                },
                                "data": {
                                    "type": "object",
                                    "properties": {
                                        "_id": {
                                            "type": "string"
                                        },
                                        "name": {
                                            "type": "string"
                                        },
                                        "email": {
                                            "type": "string",
                                            "format": "email"
                                        },
                                        "avatar": {
                                            "type": "string"
                                        },
                                        "isActive": {
                                            "type": "boolean"
                                        },
                                        "profile": {
                                            "type": "object"
                                        },
                                        "preferences": {
                                            "type": "object"
                                        },
                                        "createdAt": {
                                            "type": "string",
                                            "format": "date-time"
                                        },
                                        "updatedAt": {
                                            "type": "string",
                                            "format": "date-time"
                                        }
                                    }
                                },
                                "message": {
                                    "type": "string"
                                },
                                "timestamp": {
                                    "type": "string",
                                    "format": "date-time"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "请求参数错误",
                        "schema": {
                            "description": "请求参数错误",
                            "type": "object",
                            "properties": {
                                "success": {
                                    "type": "boolean"
                                },
                                "error": {
                                    "type": "string"
                                },
                                "timestamp": {
                                    "type": "string",
                                    "format": "date-time"
                                }
                            }
                        }
                    },
                    "409": {
                        "description": "邮箱已存在",
                        "schema": {
                            "description": "邮箱已存在",
                            "type": "object",
                            "properties": {
                                "success": {
                                    "type": "boolean"
                                },
                                "error": {
                                    "type": "string"
                                },
                                "timestamp": {
                                    "type": "string",
                                    "format": "date-time"
                                }
                            }
                        }
                    },
                    "503": {
                        "description": "数据库未连接",
                        "schema": {
                            "description": "数据库未连接",
                            "type": "object",
                            "properties": {
                                "success": {
                                    "type": "boolean"
                                },
                                "error": {
                                    "type": "string"
                                },
                                "timestamp": {
                                    "type": "string",
                                    "format": "date-time"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/users/{id}": {
            "get": {
                "summary": "根据ID获取用户",
                "description": "根据用户ID获取特定用户的详细信息",
                "tags": [
                    "用户管理"
                ],
                "parameters": [
                    {
                        "type": "string",
                        "description": "用户ID",
                        "required": true,
                        "in": "path",
                        "name": "id"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "成功获取用户信息",
                        "schema": {
                            "description": "成功获取用户信息",
                            "type": "object",
                            "properties": {
                                "success": {
                                    "type": "boolean"
                                },
                                "data": {
                                    "type": "object",
                                    "properties": {
                                        "_id": {
                                            "type": "string"
                                        },
                                        "name": {
                                            "type": "string"
                                        },
                                        "email": {
                                            "type": "string",
                                            "format": "email"
                                        },
                                        "avatar": {
                                            "type": "string"
                                        },
                                        "isActive": {
                                            "type": "boolean"
                                        },
                                        "profile": {
                                            "type": "object"
                                        },
                                        "preferences": {
                                            "type": "object"
                                        },
                                        "createdAt": {
                                            "type": "string",
                                            "format": "date-time"
                                        },
                                        "updatedAt": {
                                            "type": "string",
                                            "format": "date-time"
                                        }
                                    }
                                },
                                "message": {
                                    "type": "string"
                                },
                                "timestamp": {
                                    "type": "string",
                                    "format": "date-time"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "用户未找到",
                        "schema": {
                            "description": "用户未找到",
                            "type": "object",
                            "properties": {
                                "success": {
                                    "type": "boolean"
                                },
                                "error": {
                                    "type": "string"
                                },
                                "timestamp": {
                                    "type": "string",
                                    "format": "date-time"
                                }
                            }
                        }
                    },
                    "503": {
                        "description": "数据库未连接",
                        "schema": {
                            "description": "数据库未连接",
                            "type": "object",
                            "properties": {
                                "success": {
                                    "type": "boolean"
                                },
                                "error": {
                                    "type": "string"
                                },
                                "timestamp": {
                                    "type": "string",
                                    "format": "date-time"
                                }
                            }
                        }
                    }
                }
            },
            "put": {
                "summary": "更新用户信息",
                "description": "根据用户ID更新用户信息",
                "tags": [
                    "用户管理"
                ],
                "parameters": [
                    {
                        "name": "body",
                        "in": "body",
                        "schema": {
                            "type": "object",
                            "properties": {
                                "name": {
                                    "type": "string",
                                    "description": "用户姓名"
                                },
                                "email": {
                                    "type": "string",
                                    "format": "email",
                                    "description": "用户邮箱"
                                },
                                "avatar": {
                                    "type": "string",
                                    "description": "用户头像URL"
                                },
                                "isActive": {
                                    "type": "boolean",
                                    "description": "用户状态"
                                },
                                "profile": {
                                    "type": "object",
                                    "properties": {
                                        "bio": {
                                            "type": "string",
                                            "description": "个人简介"
                                        },
                                        "location": {
                                            "type": "string",
                                            "description": "所在地"
                                        },
                                        "website": {
                                            "type": "string",
                                            "description": "个人网站"
                                        }
                                    }
                                },
                                "preferences": {
                                    "type": "object",
                                    "properties": {
                                        "language": {
                                            "type": "string",
                                            "description": "语言偏好"
                                        },
                                        "theme": {
                                            "type": "string",
                                            "enum": [
                                                "light",
                                                "dark"
                                            ],
                                            "description": "主题偏好"
                                        },
                                        "notifications": {
                                            "type": "boolean",
                                            "description": "通知设置"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    {
                        "type": "string",
                        "description": "用户ID",
                        "required": true,
                        "in": "path",
                        "name": "id"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "成功更新用户信息",
                        "schema": {
                            "description": "成功更新用户信息",
                            "type": "object",
                            "properties": {
                                "success": {
                                    "type": "boolean"
                                },
                                "data": {
                                    "type": "object",
                                    "properties": {
                                        "_id": {
                                            "type": "string"
                                        },
                                        "name": {
                                            "type": "string"
                                        },
                                        "email": {
                                            "type": "string",
                                            "format": "email"
                                        },
                                        "avatar": {
                                            "type": "string"
                                        },
                                        "isActive": {
                                            "type": "boolean"
                                        },
                                        "profile": {
                                            "type": "object"
                                        },
                                        "preferences": {
                                            "type": "object"
                                        },
                                        "createdAt": {
                                            "type": "string",
                                            "format": "date-time"
                                        },
                                        "updatedAt": {
                                            "type": "string",
                                            "format": "date-time"
                                        }
                                    }
                                },
                                "message": {
                                    "type": "string"
                                },
                                "timestamp": {
                                    "type": "string",
                                    "format": "date-time"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "用户未找到",
                        "schema": {
                            "description": "用户未找到",
                            "type": "object",
                            "properties": {
                                "success": {
                                    "type": "boolean"
                                },
                                "error": {
                                    "type": "string"
                                },
                                "timestamp": {
                                    "type": "string",
                                    "format": "date-time"
                                }
                            }
                        }
                    },
                    "409": {
                        "description": "邮箱已存在",
                        "schema": {
                            "description": "邮箱已存在",
                            "type": "object",
                            "properties": {
                                "success": {
                                    "type": "boolean"
                                },
                                "error": {
                                    "type": "string"
                                },
                                "timestamp": {
                                    "type": "string",
                                    "format": "date-time"
                                }
                            }
                        }
                    },
                    "503": {
                        "description": "数据库未连接",
                        "schema": {
                            "description": "数据库未连接",
                            "type": "object",
                            "properties": {
                                "success": {
                                    "type": "boolean"
                                },
                                "error": {
                                    "type": "string"
                                },
                                "timestamp": {
                                    "type": "string",
                                    "format": "date-time"
                                }
                            }
                        }
                    }
                }
            },
            "delete": {
                "summary": "删除用户",
                "description": "软删除用户（设置为非活跃状态）",
                "tags": [
                    "用户管理"
                ],
                "parameters": [
                    {
                        "type": "string",
                        "description": "用户ID",
                        "required": true,
                        "in": "path",
                        "name": "id"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "成功删除用户",
                        "schema": {
                            "description": "成功删除用户",
                            "type": "object",
                            "properties": {
                                "success": {
                                    "type": "boolean"
                                },
                                "data": {
                                    "type": "object",
                                    "properties": {
                                        "success": {
                                            "type": "boolean"
                                        }
                                    }
                                },
                                "message": {
                                    "type": "string"
                                },
                                "timestamp": {
                                    "type": "string",
                                    "format": "date-time"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "用户未找到",
                        "schema": {
                            "description": "用户未找到",
                            "type": "object",
                            "properties": {
                                "success": {
                                    "type": "boolean"
                                },
                                "error": {
                                    "type": "string"
                                },
                                "timestamp": {
                                    "type": "string",
                                    "format": "date-time"
                                }
                            }
                        }
                    },
                    "503": {
                        "description": "数据库未连接",
                        "schema": {
                            "description": "数据库未连接",
                            "type": "object",
                            "properties": {
                                "success": {
                                    "type": "boolean"
                                },
                                "error": {
                                    "type": "string"
                                },
                                "timestamp": {
                                    "type": "string",
                                    "format": "date-time"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/users/stats": {
            "get": {
                "summary": "获取用户统计信息",
                "description": "获取用户总数、活跃用户数等统计信息",
                "tags": [
                    "用户管理"
                ],
                "responses": {
                    "200": {
                        "description": "成功获取统计信息",
                        "schema": {
                            "description": "成功获取统计信息",
                            "type": "object",
                            "properties": {
                                "success": {
                                    "type": "boolean"
                                },
                                "data": {
                                    "type": "object",
                                    "properties": {
                                        "total": {
                                            "type": "integer",
                                            "description": "总用户数"
                                        },
                                        "active": {
                                            "type": "integer",
                                            "description": "活跃用户数"
                                        },
                                        "inactive": {
                                            "type": "integer",
                                            "description": "非活跃用户数"
                                        },
                                        "recentlyCreated": {
                                            "type": "integer",
                                            "description": "最近7天创建的用户数"
                                        }
                                    }
                                },
                                "message": {
                                    "type": "string"
                                },
                                "timestamp": {
                                    "type": "string",
                                    "format": "date-time"
                                }
                            }
                        }
                    },
                    "503": {
                        "description": "数据库未连接",
                        "schema": {
                            "description": "数据库未连接",
                            "type": "object",
                            "properties": {
                                "success": {
                                    "type": "boolean"
                                },
                                "error": {
                                    "type": "string"
                                },
                                "timestamp": {
                                    "type": "string",
                                    "format": "date-time"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/xiaohongshu/extract": {
            "post": {
                "summary": "智能提取小红书数据",
                "description": "智能解析输入内容并提取小红书页面数据，支持URL、短链或包含短链的分享文本",
                "tags": [
                    "小红书"
                ],
                "parameters": [
                    {
                        "name": "body",
                        "in": "body",
                        "schema": {
                            "type": "object",
                            "properties": {
                                "input": {
                                    "type": "string",
                                    "description": "输入内容，可以是URL、短链或包含短链的分享文本"
                                }
                            },
                            "required": [
                                "input"
                            ]
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "成功提取小红书数据",
                        "schema": {
                            "description": "成功提取小红书数据",
                            "type": "object",
                            "properties": {
                                "success": {
                                    "type": "boolean"
                                },
                                "data": {
                                    "type": "object",
                                    "properties": {
                                        "title": {
                                            "type": "string",
                                            "nullable": true,
                                            "description": "标题"
                                        },
                                        "description": {
                                            "type": "string",
                                            "nullable": true,
                                            "description": "描述"
                                        },
                                        "keywords": {
                                            "type": "string",
                                            "nullable": true,
                                            "description": "关键词"
                                        },
                                        "like": {
                                            "type": "string",
                                            "nullable": true,
                                            "description": "点赞数"
                                        },
                                        "collect": {
                                            "type": "string",
                                            "nullable": true,
                                            "description": "收藏数"
                                        },
                                        "comment": {
                                            "type": "string",
                                            "nullable": true,
                                            "description": "评论数"
                                        },
                                        "videotime": {
                                            "type": "string",
                                            "nullable": true,
                                            "description": "视频时长"
                                        },
                                        "images": {
                                            "type": "array",
                                            "items": {
                                                "type": "string"
                                            },
                                            "description": "图片链接列表"
                                        },
                                        "videos": {
                                            "type": "array",
                                            "items": {
                                                "type": "string"
                                            },
                                            "description": "视频链接列表"
                                        },
                                        "cover_img": {
                                            "type": "array",
                                            "items": {
                                                "type": "string"
                                            },
                                            "description": "封面图片链接列表"
                                        }
                                    }
                                },
                                "message": {
                                    "type": "string"
                                },
                                "timestamp": {
                                    "type": "string",
                                    "format": "date-time"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "请求参数错误",
                        "schema": {
                            "description": "请求参数错误",
                            "type": "object",
                            "properties": {
                                "success": {
                                    "type": "boolean"
                                },
                                "error": {
                                    "type": "string"
                                },
                                "timestamp": {
                                    "type": "string",
                                    "format": "date-time"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "服务器内部错误",
                        "schema": {
                            "description": "服务器内部错误",
                            "type": "object",
                            "properties": {
                                "success": {
                                    "type": "boolean"
                                },
                                "error": {
                                    "type": "string"
                                },
                                "timestamp": {
                                    "type": "string",
                                    "format": "date-time"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/xiaohongshu/parse": {
            "post": {
                "summary": "解析小红书短链接或文本",
                "description": "解析包含小红书短链接的文本，支持从分享文本中提取短链并解析为完整URL",
                "tags": [
                    "小红书"
                ],
                "parameters": [
                    {
                        "name": "body",
                        "in": "body",
                        "schema": {
                            "type": "object",
                            "properties": {
                                "input": {
                                    "type": "string",
                                    "description": "输入内容，可以是URL、短链或包含短链的文本"
                                }
                            },
                            "required": [
                                "input"
                            ]
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "成功解析输入内容",
                        "schema": {
                            "description": "成功解析输入内容",
                            "type": "object",
                            "properties": {
                                "success": {
                                    "type": "boolean"
                                },
                                "data": {
                                    "type": "object",
                                    "properties": {
                                        "originalInput": {
                                            "type": "string",
                                            "description": "原始输入内容"
                                        },
                                        "parsedUrl": {
                                            "type": "string",
                                            "description": "解析后的完整URL"
                                        },
                                        "shortLinks": {
                                            "type": "array",
                                            "items": {
                                                "type": "string"
                                            },
                                            "description": "提取到的短链接列表"
                                        },
                                        "noteId": {
                                            "type": "string",
                                            "description": "笔记ID"
                                        },
                                        "isValidXhsContent": {
                                            "type": "boolean",
                                            "description": "是否为有效的小红书内容"
                                        }
                                    }
                                },
                                "message": {
                                    "type": "string"
                                },
                                "timestamp": {
                                    "type": "string",
                                    "format": "date-time"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "请求参数错误",
                        "schema": {
                            "description": "请求参数错误",
                            "type": "object",
                            "properties": {
                                "success": {
                                    "type": "boolean"
                                },
                                "error": {
                                    "type": "string"
                                },
                                "timestamp": {
                                    "type": "string",
                                    "format": "date-time"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "服务器内部错误",
                        "schema": {
                            "description": "服务器内部错误",
                            "type": "object",
                            "properties": {
                                "success": {
                                    "type": "boolean"
                                },
                                "error": {
                                    "type": "string"
                                },
                                "timestamp": {
                                    "type": "string",
                                    "format": "date-time"
                                }
                            }
                        }
                    }
                }
            },
            "get": {
                "summary": "解析小红书短链接或文本（GET方法）",
                "description": "通过查询参数解析包含小红书短链接的文本，支持从分享文本中提取短链并解析为完整URL",
                "tags": [
                    "小红书"
                ],
                "parameters": [
                    {
                        "type": "string",
                        "description": "输入内容，可以是URL、短链或包含短链的文本",
                        "required": true,
                        "in": "query",
                        "name": "input"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "成功解析输入内容",
                        "schema": {
                            "description": "成功解析输入内容",
                            "type": "object",
                            "properties": {
                                "success": {
                                    "type": "boolean"
                                },
                                "data": {
                                    "type": "object",
                                    "properties": {
                                        "originalInput": {
                                            "type": "string",
                                            "description": "原始输入内容"
                                        },
                                        "parsedUrl": {
                                            "type": "string",
                                            "description": "解析后的完整URL"
                                        },
                                        "shortLinks": {
                                            "type": "array",
                                            "items": {
                                                "type": "string"
                                            },
                                            "description": "提取到的短链接列表"
                                        },
                                        "noteId": {
                                            "type": "string",
                                            "description": "笔记ID"
                                        },
                                        "isValidXhsContent": {
                                            "type": "boolean",
                                            "description": "是否为有效的小红书内容"
                                        }
                                    }
                                },
                                "message": {
                                    "type": "string"
                                },
                                "timestamp": {
                                    "type": "string",
                                    "format": "date-time"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "请求参数错误",
                        "schema": {
                            "description": "请求参数错误",
                            "type": "object",
                            "properties": {
                                "success": {
                                    "type": "boolean"
                                },
                                "error": {
                                    "type": "string"
                                },
                                "timestamp": {
                                    "type": "string",
                                    "format": "date-time"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "服务器内部错误",
                        "schema": {
                            "description": "服务器内部错误",
                            "type": "object",
                            "properties": {
                                "success": {
                                    "type": "boolean"
                                },
                                "error": {
                                    "type": "string"
                                },
                                "timestamp": {
                                    "type": "string",
                                    "format": "date-time"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/xiaohongshu/info": {
            "get": {
                "summary": "获取小红书API信息",
                "description": "获取小红书数据提取API的详细信息和使用说明",
                "tags": [
                    "小红书"
                ],
                "responses": {
                    "200": {
                        "description": "成功获取API信息",
                        "schema": {
                            "description": "成功获取API信息",
                            "type": "object",
                            "properties": {
                                "success": {
                                    "type": "boolean"
                                },
                                "data": {
                                    "type": "object",
                                    "properties": {
                                        "name": {
                                            "type": "string"
                                        },
                                        "description": {
                                            "type": "string"
                                        },
                                        "version": {
                                            "type": "string"
                                        },
                                        "endpoints": {
                                            "type": "array",
                                            "items": {
                                                "type": "string"
                                            }
                                        },
                                        "usage": {
                                            "type": "array",
                                            "items": {
                                                "type": "object",
                                                "properties": {
                                                    "method": {
                                                        "type": "string"
                                                    },
                                                    "endpoint": {
                                                        "type": "string"
                                                    },
                                                    "description": {
                                                        "type": "string"
                                                    },
                                                    "example": {
                                                        "type": "object"
                                                    }
                                                }
                                            }
                                        }
                                    }
                                },
                                "message": {
                                    "type": "string"
                                },
                                "timestamp": {
                                    "type": "string",
                                    "format": "date-time"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/xiaohongshu/records": {
            "get": {
                "summary": "获取小红书记录列表",
                "description": "获取已保存的小红书记录列表，支持分页、搜索和筛选",
                "tags": [
                    "小红书"
                ],
                "parameters": [
                    {
                        "type": "integer",
                        "minimum": 1,
                        "default": 1,
                        "required": false,
                        "in": "query",
                        "name": "page"
                    },
                    {
                        "type": "integer",
                        "minimum": 1,
                        "maximum": 100,
                        "default": 10,
                        "required": false,
                        "in": "query",
                        "name": "limit"
                    },
                    {
                        "type": "string",
                        "description": "搜索标题、描述或noteId",
                        "required": false,
                        "in": "query",
                        "name": "search"
                    },
                    {
                        "type": "string",
                        "description": "筛选特定用户的记录",
                        "required": false,
                        "in": "query",
                        "name": "userId"
                    },
                    {
                        "type": "string",
                        "enum": [
                            "active",
                            "archived",
                            "deleted"
                        ],
                        "default": "active",
                        "required": false,
                        "in": "query",
                        "name": "status"
                    },
                    {
                        "type": "string",
                        "format": "date",
                        "description": "开始日期",
                        "required": false,
                        "in": "query",
                        "name": "dateFrom"
                    },
                    {
                        "type": "string",
                        "format": "date",
                        "description": "结束日期",
                        "required": false,
                        "in": "query",
                        "name": "dateTo"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "成功获取记录列表",
                        "schema": {
                            "description": "成功获取记录列表",
                            "type": "object",
                            "properties": {
                                "success": {
                                    "type": "boolean"
                                },
                                "data": {
                                    "type": "object",
                                    "properties": {
                                        "records": {
                                            "type": "array",
                                            "items": {
                                                "type": "object",
                                                "properties": {
                                                    "_id": {
                                                        "type": "string"
                                                    },
                                                    "noteId": {
                                                        "type": "string"
                                                    },
                                                    "url": {
                                                        "type": "string"
                                                    },
                                                    "originalInput": {
                                                        "type": "string"
                                                    },
                                                    "title": {
                                                        "type": "string"
                                                    },
                                                    "description": {
                                                        "type": "string"
                                                    },
                                                    "keywords": {
                                                        "type": "string"
                                                    },
                                                    "like": {
                                                        "type": "string"
                                                    },
                                                    "collect": {
                                                        "type": "string"
                                                    },
                                                    "comment": {
                                                        "type": "string"
                                                    },
                                                    "videotime": {
                                                        "type": "string"
                                                    },
                                                    "images": {
                                                        "type": "array",
                                                        "items": {
                                                            "type": "string"
                                                        }
                                                    },
                                                    "videos": {
                                                        "type": "array",
                                                        "items": {
                                                            "type": "string"
                                                        }
                                                    },
                                                    "cover_img": {
                                                        "type": "array",
                                                        "items": {
                                                            "type": "string"
                                                        }
                                                    },
                                                    "tags": {
                                                        "type": "array",
                                                        "items": {
                                                            "type": "string"
                                                        }
                                                    },
                                                    "status": {
                                                        "type": "string"
                                                    },
                                                    "extractedAt": {
                                                        "type": "string",
                                                        "format": "date-time"
                                                    },
                                                    "createdAt": {
                                                        "type": "string",
                                                        "format": "date-time"
                                                    },
                                                    "updatedAt": {
                                                        "type": "string",
                                                        "format": "date-time"
                                                    }
                                                }
                                            }
                                        },
                                        "pagination": {
                                            "type": "object",
                                            "properties": {
                                                "total": {
                                                    "type": "integer"
                                                },
                                                "page": {
                                                    "type": "integer"
                                                },
                                                "limit": {
                                                    "type": "integer"
                                                },
                                                "totalPages": {
                                                    "type": "integer"
                                                }
                                            }
                                        }
                                    }
                                },
                                "message": {
                                    "type": "string"
                                },
                                "timestamp": {
                                    "type": "string",
                                    "format": "date-time"
                                }
                            }
                        }
                    },
                    "503": {
                        "description": "数据库未连接",
                        "schema": {
                            "description": "数据库未连接",
                            "type": "object",
                            "properties": {
                                "success": {
                                    "type": "boolean"
                                },
                                "error": {
                                    "type": "string"
                                },
                                "timestamp": {
                                    "type": "string",
                                    "format": "date-time"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/xiaohongshu/records/{id}": {
            "get": {
                "summary": "根据ID获取小红书记录",
                "description": "根据记录ID获取特定小红书记录的详细信息",
                "tags": [
                    "小红书"
                ],
                "parameters": [
                    {
                        "type": "string",
                        "description": "记录ID",
                        "required": true,
                        "in": "path",
                        "name": "id"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "成功获取记录信息",
                        "schema": {
                            "description": "成功获取记录信息",
                            "type": "object",
                            "properties": {
                                "success": {
                                    "type": "boolean"
                                },
                                "data": {
                                    "type": "object",
                                    "properties": {
                                        "_id": {
                                            "type": "string"
                                        },
                                        "noteId": {
                                            "type": "string"
                                        },
                                        "url": {
                                            "type": "string"
                                        },
                                        "originalInput": {
                                            "type": "string"
                                        },
                                        "title": {
                                            "type": "string"
                                        },
                                        "description": {
                                            "type": "string"
                                        },
                                        "keywords": {
                                            "type": "string"
                                        },
                                        "like": {
                                            "type": "string"
                                        },
                                        "collect": {
                                            "type": "string"
                                        },
                                        "comment": {
                                            "type": "string"
                                        },
                                        "videotime": {
                                            "type": "string"
                                        },
                                        "images": {
                                            "type": "array",
                                            "items": {
                                                "type": "string"
                                            }
                                        },
                                        "videos": {
                                            "type": "array",
                                            "items": {
                                                "type": "string"
                                            }
                                        },
                                        "cover_img": {
                                            "type": "array",
                                            "items": {
                                                "type": "string"
                                            }
                                        },
                                        "tags": {
                                            "type": "array",
                                            "items": {
                                                "type": "string"
                                            }
                                        },
                                        "status": {
                                            "type": "string"
                                        },
                                        "extractedAt": {
                                            "type": "string",
                                            "format": "date-time"
                                        },
                                        "createdAt": {
                                            "type": "string",
                                            "format": "date-time"
                                        },
                                        "updatedAt": {
                                            "type": "string",
                                            "format": "date-time"
                                        }
                                    }
                                },
                                "message": {
                                    "type": "string"
                                },
                                "timestamp": {
                                    "type": "string",
                                    "format": "date-time"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "记录未找到",
                        "schema": {
                            "description": "记录未找到",
                            "type": "object",
                            "properties": {
                                "success": {
                                    "type": "boolean"
                                },
                                "error": {
                                    "type": "string"
                                },
                                "timestamp": {
                                    "type": "string",
                                    "format": "date-time"
                                }
                            }
                        }
                    },
                    "503": {
                        "description": "数据库未连接",
                        "schema": {
                            "description": "数据库未连接",
                            "type": "object",
                            "properties": {
                                "success": {
                                    "type": "boolean"
                                },
                                "error": {
                                    "type": "string"
                                },
                                "timestamp": {
                                    "type": "string",
                                    "format": "date-time"
                                }
                            }
                        }
                    }
                }
            },
            "delete": {
                "summary": "删除小红书记录",
                "description": "软删除小红书记录（设置状态为deleted）",
                "tags": [
                    "小红书"
                ],
                "parameters": [
                    {
                        "type": "string",
                        "description": "记录ID",
                        "required": true,
                        "in": "path",
                        "name": "id"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "成功删除记录",
                        "schema": {
                            "description": "成功删除记录",
                            "type": "object",
                            "properties": {
                                "success": {
                                    "type": "boolean"
                                },
                                "data": {
                                    "type": "object",
                                    "properties": {
                                        "success": {
                                            "type": "boolean"
                                        }
                                    }
                                },
                                "message": {
                                    "type": "string"
                                },
                                "timestamp": {
                                    "type": "string",
                                    "format": "date-time"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "记录未找到",
                        "schema": {
                            "description": "记录未找到",
                            "type": "object",
                            "properties": {
                                "success": {
                                    "type": "boolean"
                                },
                                "error": {
                                    "type": "string"
                                },
                                "timestamp": {
                                    "type": "string",
                                    "format": "date-time"
                                }
                            }
                        }
                    },
                    "503": {
                        "description": "数据库未连接",
                        "schema": {
                            "description": "数据库未连接",
                            "type": "object",
                            "properties": {
                                "success": {
                                    "type": "boolean"
                                },
                                "error": {
                                    "type": "string"
                                },
                                "timestamp": {
                                    "type": "string",
                                    "format": "date-time"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/xiaohongshu/stats": {
            "get": {
                "summary": "获取小红书统计信息",
                "description": "获取小红书记录的统计信息，包括总数、状态分布、热门标签等",
                "tags": [
                    "小红书"
                ],
                "responses": {
                    "200": {
                        "description": "成功获取统计信息",
                        "schema": {
                            "description": "成功获取统计信息",
                            "type": "object",
                            "properties": {
                                "success": {
                                    "type": "boolean"
                                },
                                "data": {
                                    "type": "object",
                                    "properties": {
                                        "total": {
                                            "type": "integer",
                                            "description": "总记录数"
                                        },
                                        "active": {
                                            "type": "integer",
                                            "description": "活跃记录数"
                                        },
                                        "archived": {
                                            "type": "integer",
                                            "description": "归档记录数"
                                        },
                                        "deleted": {
                                            "type": "integer",
                                            "description": "已删除记录数"
                                        },
                                        "recentlyExtracted": {
                                            "type": "integer",
                                            "description": "最近7天提取的记录数"
                                        },
                                        "topTags": {
                                            "type": "array",
                                            "items": {
                                                "type": "object",
                                                "properties": {
                                                    "tag": {
                                                        "type": "string"
                                                    },
                                                    "count": {
                                                        "type": "integer"
                                                    }
                                                }
                                            },
                                            "description": "热门标签"
                                        }
                                    }
                                },
                                "message": {
                                    "type": "string"
                                },
                                "timestamp": {
                                    "type": "string",
                                    "format": "date-time"
                                }
                            }
                        }
                    },
                    "503": {
                        "description": "数据库未连接",
                        "schema": {
                            "description": "数据库未连接",
                            "type": "object",
                            "properties": {
                                "success": {
                                    "type": "boolean"
                                },
                                "error": {
                                    "type": "string"
                                },
                                "timestamp": {
                                    "type": "string",
                                    "format": "date-time"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/database/status": {
            "get": {
                "summary": "检查数据库连接状态",
                "description": "返回当前数据库连接状态和健康信息",
                "tags": [
                    "数据库"
                ],
                "responses": {
                    "200": {
                        "description": "Default Response",
                        "schema": {
                            "type": "object",
                            "properties": {
                                "success": {
                                    "type": "boolean"
                                },
                                "data": {
                                    "type": "object",
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "enum": [
                                                "healthy",
                                                "unhealthy",
                                                "disconnected"
                                            ]
                                        },
                                        "dbName": {
                                            "type": "string"
                                        },
                                        "connected": {
                                            "type": "boolean"
                                        }
                                    }
                                },
                                "timestamp": {
                                    "type": "string",
                                    "format": "date-time"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/database/collections": {
            "get": {
                "summary": "获取数据库集合列表",
                "description": "返回当前数据库中所有集合的名称",
                "tags": [
                    "数据库"
                ],
                "responses": {
                    "200": {
                        "description": "Default Response",
                        "schema": {
                            "type": "object",
                            "properties": {
                                "success": {
                                    "type": "boolean"
                                },
                                "data": {
                                    "type": "object",
                                    "properties": {
                                        "collections": {
                                            "type": "array",
                                            "items": {
                                                "type": "string"
                                            }
                                        }
                                    }
                                },
                                "timestamp": {
                                    "type": "string",
                                    "format": "date-time"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/database/test": {
            "post": {
                "summary": "测试数据库写入操作",
                "description": "向测试集合中插入一条记录，用于验证数据库写入功能",
                "tags": [
                    "数据库"
                ],
                "parameters": [
                    {
                        "name": "body",
                        "in": "body",
                        "schema": {
                            "type": "object",
                            "required": [
                                "message"
                            ],
                            "properties": {
                                "message": {
                                    "type": "string",
                                    "description": "测试消息内容"
                                }
                            }
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Default Response",
                        "schema": {
                            "type": "object",
                            "properties": {
                                "success": {
                                    "type": "boolean"
                                },
                                "data": {
                                    "type": "object",
                                    "properties": {
                                        "insertedId": {
                                            "type": "string"
                                        },
                                        "message": {
                                            "type": "string"
                                        }
                                    }
                                },
                                "timestamp": {
                                    "type": "string",
                                    "format": "date-time"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/database/indexes": {
            "get": {
                "summary": "检查数据库索引状态",
                "description": "获取当前数据库中所有集合的索引信息",
                "tags": [
                    "数据库"
                ],
                "responses": {
                    "200": {
                        "description": "Default Response",
                        "schema": {
                            "type": "object",
                            "properties": {
                                "success": {
                                    "type": "boolean"
                                },
                                "data": {
                                    "type": "object",
                                    "properties": {
                                        "users": {
                                            "type": "array"
                                        },
                                        "xiaohongshu": {
                                            "type": "array"
                                        }
                                    }
                                },
                                "timestamp": {
                                    "type": "string",
                                    "format": "date-time"
                                }
                            }
                        }
                    },
                    "503": {
                        "description": "Default Response",
                        "schema": {
                            "type": "object",
                            "properties": {
                                "success": {
                                    "type": "boolean"
                                },
                                "error": {
                                    "type": "string"
                                },
                                "timestamp": {
                                    "type": "string",
                                    "format": "date-time"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/database/init": {
            "post": {
                "summary": "初始化数据库索引",
                "description": "创建数据库所需的所有索引",
                "tags": [
                    "数据库"
                ],
                "responses": {
                    "200": {
                        "description": "Default Response",
                        "schema": {
                            "type": "object",
                            "properties": {
                                "success": {
                                    "type": "boolean"
                                },
                                "data": {
                                    "type": "object",
                                    "properties": {
                                        "success": {
                                            "type": "boolean"
                                        }
                                    }
                                },
                                "message": {
                                    "type": "string"
                                },
                                "timestamp": {
                                    "type": "string",
                                    "format": "date-time"
                                }
                            }
                        }
                    },
                    "503": {
                        "description": "Default Response",
                        "schema": {
                            "type": "object",
                            "properties": {
                                "success": {
                                    "type": "boolean"
                                },
                                "error": {
                                    "type": "string"
                                },
                                "timestamp": {
                                    "type": "string",
                                    "format": "date-time"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/database/rebuild-indexes": {
            "post": {
                "summary": "重建数据库索引",
                "description": "删除并重新创建所有数据库索引（谨慎使用）",
                "tags": [
                    "数据库"
                ],
                "responses": {
                    "200": {
                        "description": "Default Response",
                        "schema": {
                            "type": "object",
                            "properties": {
                                "success": {
                                    "type": "boolean"
                                },
                                "data": {
                                    "type": "object",
                                    "properties": {
                                        "success": {
                                            "type": "boolean"
                                        }
                                    }
                                },
                                "message": {
                                    "type": "string"
                                },
                                "timestamp": {
                                    "type": "string",
                                    "format": "date-time"
                                }
                            }
                        }
                    },
                    "503": {
                        "description": "Default Response",
                        "schema": {
                            "type": "object",
                            "properties": {
                                "success": {
                                    "type": "boolean"
                                },
                                "error": {
                                    "type": "string"
                                },
                                "timestamp": {
                                    "type": "string",
                                    "format": "date-time"
                                }
                            }
                        }
                    }
                }
            }
        }
    },
    "host": "localhost:3000",
    "schemes": [
        "http"
    ],
    "consumes": [
        "application/json"
    ],
    "produces": [
        "application/json"
    ],
    "tags": [
        {
            "name": "系统",
            "description": "系统相关接口"
        },
        {
            "name": "本地用户",
            "description": "本地用户管理"
        },
        {
            "name": "小红书",
            "description": "小红书数据提取API"
        },
        {
            "name": "数据库",
            "description": "数据库管理和测试接口"
        }
    ]
}